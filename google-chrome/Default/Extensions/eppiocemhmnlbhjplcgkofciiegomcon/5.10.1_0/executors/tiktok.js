(()=>{const r=!!document?.querySelector("script[adblock_use][bis_use]"),T=(()=>{const r=sessionStorage.getItem("bis_data");if(null!==r){return JSON.parse(r)}return null})(),l=T?.config?`${T.id}_t`:null,H=T?.config?.tiktokConfig?.TRAFFIC_LISTENER_CONFIG||{},{PARSERS:F=[]}=H;ParserProcessors={XMLHttpRequest:function(T){const l=fetch;fetch=async function(H){let F=H instanceof Request?H.url:H;if("object"==typeof F&&F.href&&(F=F.href),!(r=>{let T=r.replace(/.*\/([gimy]*)$/,"$1"),l=r.replace(new RegExp("^/(.*?)/"+T+"$"),"$1");return new RegExp(l,T)})(T.QUERY).test(F))return l.apply(this,arguments);try{const H=await l.apply(this,arguments);if(H.body instanceof ReadableStream){const l=H.clone(),F=await l.json(),X=F[T.CONTENT_QUERY],I=y(X,T.PATHS_CHECK_AD);if(I?.length&&(P(I,T),r)){F[T.CONTENT_QUERY]=X.filter((r=>!r.isAd));const r=JSON.stringify(F);return new Response(r,{status:H.status,statusText:H.statusText,headers:H.headers})}}return H}catch(r){return l.apply(this,arguments)}}}};const y=(r,T)=>{const l=[];for(let H of r)T.some((r=>r.reduce(((r,T)=>r&&"object"==typeof r?r[T]:r),H)))&&l.push(H);return l},P=(r,T)=>{if(r?.length)for(let F of r){const r=X(F,H.PROPERTIES_FOR_AD_DATA,T.PATHS_GET_PROPERTIES);r&&I(l,r)}},X=function(r,T,l){let H={};for(let F of T){const{NAME:T,PATH_NAME:y,IS_NECESSARY:P}=F,X=l[y];if(H[T]=X?.length?X.reduce(((r,T,l)=>{if(l===X.length-1&&"PATH_TO_PAGE_LINK"===y){return`https://www.tiktok.com/@${r[T]}`}return r&&"object"==typeof r?r?r[T]:null:r??null}),r):null,P&&!H[T])return null}return H},I=(r,T)=>{try{let l={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"TIKTOK_VIDEO_CANDIDATES",from:r,to:r.substring(0,r.length-2),content:T};window.postMessage(l)}catch(r){}};for(let r of F)r.USE&&ParserProcessors[r.TYPE](r)})();