(()=>{function r(r,T,l,H,F=null){try{document.location.host;let y="detector",P=l;!P&&F&&(P=F[0]?.type?F[0].type:null);let X={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"VIDEO_XHR_CANDIDATE",from:y,to:y.substring(0,y.length-2),content:{requestMethod:r,url:T,type:P,content:H}};if(F&&F instanceof Promise)return void F.then((r=>{X.content.encodedPostBody=r,X.type="VIDEO_TWITCH_INSTREAM_DATA",window.postMessage(X,"*")}));H?.includes("streamPlaybackAccessToken")&&(X.type="VIDEO_TWITCH_INSTREAM_DATA"),window.postMessage(X,"*")}catch(r){}}let T=XMLHttpRequest.prototype.open,l=XMLHttpRequest.prototype.send,H=fetch;XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],T.apply(this,arguments)},XMLHttpRequest.prototype.send=function(){const T=Object.assign(arguments,{});let H=this.onreadystatechange;return this.onreadystatechange=function(){if(4!==this.readyState||function(r){const T=document.querySelector("script[data-bis-config]")?JSON.parse(document.querySelector("script[data-bis-config]").getAttribute("data-bis-config")):null;return!!T&&T.some((T=>r.includes(T)))}(this.responseURL)||r(this.requestMethod,this.responseURL,this.getResponseHeader("content-type"),this.response,T),H)return H.apply(this,arguments)},l.apply(this,arguments)},fetch=function(){const T=arguments;let l=arguments[0]instanceof Request?arguments[0].url:arguments[0];const F=arguments[0]instanceof Request?arguments[0].method:arguments[1]?.method?arguments[1].method:"GET",y="POST"===F?arguments[1].body:null;return"object"==typeof l&&l.href&&(l=l.href),new Promise(((P,X)=>{H.apply(this,T).then((function(T){if(T.body instanceof ReadableStream){const H=T.headers.get("content-type"),P=T.json;T.json=function(){return new Promise(((X,I)=>{P.apply(this,arguments).then((function(P){0!==T.url.search(/data:application\/json;base64/)&&r(F,l,H,JSON.stringify(P),y),X(P)})).catch((function(r){I(r)}))}))};const X=T.text;T.text=function(){return new Promise(((P,I)=>{X.apply(this,arguments).then((function(X){0!==T.url.search(/data:application\/json;base64/)&&r(F,l,H,X,y),P(X)})).catch((function(r){I(r)}))}))},new RegExp("video-edge.*.ts$").test(l)&&"POST"===F&&y?.arrayBuffer&&r(F,l,y.type,null,y.text())}P.apply(this,arguments)})).catch((function(r){X.apply(this,arguments)}))}))}})();