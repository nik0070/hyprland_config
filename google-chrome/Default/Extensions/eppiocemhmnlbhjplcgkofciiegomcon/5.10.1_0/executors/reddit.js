(()=>{const r=null!==(T=sessionStorage.getItem("bis_data"))?JSON.parse(T):null;var T;const l=r?r.config.redditConfig:null,H=r?r.id+"_w":null;if(null!==l){function F(r){const T=function(r){const T=function(r){const T=new RegExp(l.VIDEO_TRAFFIC_DETECTOR.VIDEO_ID_REGEX);let H=r.match(T),F=null;H&&H.length&&(F=H[1]);return F}(r);return{videoId:T,url:r}}(r);!function(r){try{r.detectionTime=Date.now()/1e3|0;let T={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"REDDIT_VIDEO_DATA",from:H,to:H.substring(0,H.length-2),content:r};window.postMessage(T)}catch(r){}}(T)}function y(r){try{const T=JSON.parse(r.content);let l=[];for(let r of T){const T={};r.source&&r.source.hasOwnProperty("outboundUrl")&&(T.elementId=r.id,T.targetUrl=r.source.outboundUrl,l.push(T))}!function(r){try{let T={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"REDDIT_RIGHT_COLUMN_DATA",from:H,to:H.substring(0,H.length-2),content:r};window.postMessage(T)}catch(r){}}(l)}catch(r){}}let P=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],this.url=arguments[1],P.apply(this,arguments)};let X=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){var r=this;let T=(H=r.url,new RegExp(l.VIDEO_TRAFFIC_DETECTOR.VIDEO_MPD_URL_CHECK).test(H));var H;let P,I=function(r){return new RegExp(l.RIGHT_COLUMN.PATH_WITH_AD_URL).test(r)}(r.url);if(!T&&!I)return X.apply(this,arguments);const R=function(){if(I&&4===r.readyState){y({url:r.url,content:""===r.responseType||"text"===r.responseType?r.responseText:""})}else I&&4!==r.readyState?P=setTimeout((()=>R.apply(this,arguments)),0):P&&clearTimeout(P)};return R(),F(r.url),X.apply(this,arguments)}}})();