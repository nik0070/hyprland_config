(()=>{const r=function(){let r=sessionStorage.getItem("bis_data");return null!==r?JSON.parse(r):null}(),T=r?r.config.pinterestConfig.VIDEO_TRAFFIC_CONFIG.PARSERS:[],l=r?r.config.pinterestConfig.VIDEO_TRAFFIC_CONFIG.PROPERTIES_FOR_VIDEO_DATA:[],H=r?`${r.id}_p`:null;const F=function(r,T){let H=null;for(let F of l){const l=F.NAME,P=F.PATH_NAME;H||(H={}),"detectionTime"!==l?"videoId"===l&&H.videoUrl?H[l]=X(H.videoUrl,T[P]):H[l]=y(r,T[P]):H[l]=Date.now()/1e3|0}return H},y=function(r,T){let l=r;for(let r of T)if(l[r])l=l[r];else if(!l[r]){l=null;break}return l},P=function(r,T){return function(){!function(r,T,l){try{let H={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:l,from:r,to:r.substring(0,r.length-2),content:T};window.postMessage(H)}catch(r){}}(H,r,T)}},X=function(r,T){if(!r)return"";const l=new RegExp(T);let H=r.match(l);return H&&H[1]?H[1]:""},I=function(r,T){let l=null;const H=Object.keys(r);for(let y of H){const H=r[y];T.CHECK_PROPERTIES.every((r=>H[r]))&&(l=F(H,T.PATHS_GET_PROPERTIES),l&&setTimeout(P(l,"PINTEREST_VIDEO_DATA"),0))}},R={script:function(r){const T=Array.from(document.querySelectorAll(r.QUERY));if(T.length)for(let l of T)try{if(!l.text||l.text&&"{"!==l.text[0])return;l.setAttribute("data-bis-activated","");let T=JSON.parse(l.text),H={};for(let l of r.PATH_TO_PINS){let r=!1;H=T;for(let T of l){const F=l.indexOf(T);if(!H[T])break;H=H[T],F===l.length-1&&(r=!0)}if(r)break}setTimeout((()=>I(H,r)),0)}catch(r){}},XMLHttpRequest:function(r){let T=XMLHttpRequest.prototype.open,l=XMLHttpRequest.prototype.setRequestHeader;XMLHttpRequest.prototype.setRequestHeader=function(){const r=arguments[0].toLowerCase(),T=arguments[1];this.requestHeaders||(this.requestHeaders={}),this.requestHeaders[r]=T,l.apply(this,arguments)},XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],T.apply(this,arguments)};let H=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){let T=this.onreadystatechange;return this.onreadystatechange=function(){const l=new RegExp(r.QUERY);if(4===this.readyState&&l.test(this.responseURL)){let T=this.response.length&&"{"===this.response[0]?JSON.parse(this.response):this.response,l=[];for(let H of r.PATH_TO_PINS){let r=!1;l=T;for(let T of H){const F=H.indexOf(T);if(!l[T])break;l=l[T],F===H.length-1&&(r=!0)}if(r)break}!function(r,T){let l=null;if(r.length)for(let H of r)T.CHECK_PROPERTIES.every((r=>H[r]))&&(l=F(H,T.PATHS_GET_PROPERTIES),l&&setTimeout(P(l,"PINTEREST_VIDEO_DATA"),0))}(l,r)}if(T)return T.apply(this,arguments)},H.apply(this,arguments)}}};for(let r of T){if(!r.USE)continue;if("XMLHttpRequest"===r.TYPE){R[r.TYPE](r);continue}let T=r?.MAX_REPEATS_ACTIVATE||5,l=setInterval((()=>{T--,R[r.TYPE](r),T<=0&&clearInterval(l)}),1e3)}})();