(()=>{function r(r,T,l,H,F=null){try{let y=document.location.host,P="detector",X={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"VIDEO_XHR_CANDIDATE",from:P,to:P.substring(0,P.length-2),content:{requestMethod:r,url:T,type:l,content:H}};y.includes("youtube.com")&&F&&F[0]&&F[0].length&&(X.content.encodedPostBody=F[0]),window.postMessage(X,"*")}catch(r){}}let T=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],T.apply(this,arguments)};let l=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){const T=Object.assign(arguments,{});let H=this.onreadystatechange;return this.onreadystatechange=function(){if(4!==this.readyState||function(r){const T=document.querySelector("script[data-bis-config]")?JSON.parse(document.querySelector("script[data-bis-config]").getAttribute("data-bis-config")):null;return!!T&&T.some((T=>r.includes(T)))}(this.responseURL)||r(this.requestMethod,this.responseURL,this.getResponseHeader("content-type"),this.response,T),H)return H.apply(this,arguments)},l.apply(this,arguments)};let H=fetch;fetch=function(){const T=arguments;let l=arguments[0]instanceof Request?arguments[0].url:arguments[0];const F=arguments[0]instanceof Request?arguments[0].method:"GET";return"object"==typeof l&&l.href&&(l=l.href),new Promise(((y,P)=>{H.apply(this,T).then((function(T){if(T.body instanceof ReadableStream){const H=T.json;T.json=function(){return new Promise(((y,P)=>{H.apply(this,arguments).then((function(H){0!==T.url.search(/data:application\/json;base64/)&&r(F,l,T.headers.get("content-type"),JSON.stringify(H)),y(H)})).catch((function(r){P(r)}))}))};const y=T.text;T.text=function(){return new Promise(((H,P)=>{y.apply(this,arguments).then((function(y){0!==T.url.search(/data:application\/json;base64/)&&r(F,l,T.headers.get("content-type"),y),H(y)})).catch((function(r){P(r)}))}))}}y.apply(this,arguments)})).catch((function(r){P.apply(this,arguments)}))}))}})();