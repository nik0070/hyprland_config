(()=>{const r=(T=sessionStorage.getItem("bis_data"),l={adOpt:!!document.querySelector("script[ad-opt-on]"),config:null},null!==T&&(l.config=JSON.parse(T)),l);var T,l;const H=r&&r.config?r.config.config.instagramConfig.TRAFFIC_LISTENER_CONFIG.PARSERS:[],F=r&&r.config?r.config.config.instagramConfig.TRAFFIC_LISTENER_CONFIG.PROPERTIES_FOR_VIDEO_DATA:[],y=r&&r.config?`${r.config.id}_i`:null;!(!r||!r.adOpt)&&r.adOpt;let P=0;const X=function(r,T){return function(){!function(r,T,l){try{let H={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:l,from:r,to:r.substring(0,r.length-2),content:T};window.postMessage(H)}catch(r){}}(y,r,T)}},I=function(r,T){let l=null,H=null;for(let y of F){const F=y.NAME,P=y.PATH_NAME,X=y.IS_NECESSARY,I=y.DEFAULT_VALUE;if(l||(l={}),"detectionTime"!==F){if(T[P])if("showFullText"!==F){if(l[F]=R(r,T[P],I),X&&!l[F])return null}else H=T[P].some((T=>!!R(r,T,I)))}else l[F]=Date.now()/1e3|0}return l.headlineText?.length&&(l.fullText=l.headlineText+"\n"+l.fullText),delete l.headlineText,!1===H&&(l.fullText=""),l},R=function(r,T,l){let H=r;for(let[r,F]of Object.entries(T)){if("*"===F&&H.length){const l=T.slice(+r+1),F=l.length-1;return H.map((r=>{let T=r;for(let[r,H]of Object.entries(l))if(T[H]&&(T=T[H]),F===+r&&"string"==typeof T)return T}))}if(H[F])H=H[F];else if(!H[F]){H=l;break}}return H},_=function(r,T){if(!r||!r.length)return;let l=null;for(let H of r){let r="";try{if(D(H,T.PATH_CHECK_PROPERTIES))l=I(H,T.PATHS_GET_PROPERTIES),r=l.videoSrc?"INSTAGRAM_VIDEO_DATA":"INSTAGRAM_CAROUSEL_SLIDES_SOURCES";else{if(!T.RULES_TO_GET_FULL_TEXT||!D(H,T.RULES_TO_GET_FULL_TEXT.PATH_CHECK_PROPERTIES))continue;l=I(H,T.RULES_TO_GET_FULL_TEXT.PATHS_GET_PROPERTIES),r="INSTAGRAM_FULL_TEXT_DATA"}l&&setTimeout(X(l,r),0)}catch(r){}}},t=function(r,T){if(!r||!r.length)return;let l=[];for(let H of r){if(!D(H,T.PATH_CHECK_PROPERTIES))continue;let r=I(H,T.PATHS_GET_PROPERTIES);r&&(null===r.videoVersions&&delete r.videoVersions,l.push(r))}l.length&&setTimeout(X(l,"INSTAGRAM_STORY_DATA"),0)},D=function(r,T){let l=!1;for(let H of T){let T=r,F=H.length-1;for(let[r,y]of Object.entries(H))if(y in T&&T[y]){if(T=T[y],F===+r){l=!0;break}}else{if("*"===y&&T.length&&T.length>1&&!l&&F===+r){l=!0;break}l=!1}if(l)break}return l},M={XMLHttpRequest:function(r){let T=XMLHttpRequest.prototype.open,l=XMLHttpRequest.prototype.setRequestHeader;XMLHttpRequest.prototype.setRequestHeader=function(){const r=arguments[0].toLowerCase(),T=arguments[1];this.requestHeaders||(this.requestHeaders={}),this.requestHeaders[r]=T,l.apply(this,arguments)},XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],T.apply(this,arguments)};let H=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){let T=this.onreadystatechange;return this.onreadystatechange=function(){const l=function(){const T=r.AD_TYPES_WAYS_TO_PROPERTIES;let l=r.QUERY;for(let r=0;r<T.length;r++){const H="QUERY_AD_TYPE_"+r,F=T[r];l=l.replace(H,F.QUERY_URL_PATH)}return new RegExp(l)}(),H=r.MATCH_HEADERS,F=this.requestHeaders?Object.keys(this.requestHeaders):null;let y=!1;if(F&&(y=F.some((r=>{if(H[r]&&H[r].includes(this.requestHeaders[r]))return!0}))),4===this.readyState&&l.test(this.responseURL))for(let X of r.AD_TYPES_WAYS_TO_PROPERTIES){const I=this.responseURL.includes(X.QUERY_URL_PATH);if(y||I){let R=this.response.length?JSON.parse(this.response):this.response;function P(r,T){let l=T;for(let[T,H]of Object.entries(r))l&&l[H]&&(l=l[H]),"*"===H&&l.length&&(l=l.map((l=>P(r.slice(+T+1),l))));return l}let D=P(X.PATH_TO_POSTS,R);"story"===X.AD_TYPE&&this.responseURL.includes(X.QUERY_URL_PATH)&&D.length?D.forEach((r=>{r&&t(r,X)})):"feed"===X.AD_TYPE&&_(D,X)}}if(T)return T.apply(this,arguments)},H.apply(this,arguments)}},script:function(r){function T(){let T=Array.from(document.querySelectorAll("script"));const l=new RegExp(r.REGEXP_FILTER);let H=T.filter((r=>r.innerHTML.search(l)>-1));return H.length?H[0]:null}if(P++,"complete"!==document.readyState&&P<15){let T=null;return void(T=setTimeout((()=>{T&&clearTimeout(T),M.script(r)}),200))}let l=function(){let r=T();return r?JSON.parse(r.innerHTML):null}();let H=function r(T,l){let H=l;for(let[l,F]of Object.entries(T))H&&H[F]&&(H=H[F]),"*"===F&&H.length&&(H=H.map((H=>r(T.slice(+l+1),H))));return H}(r.PATH_TO_POSTS,l);_(H,r)}};for(let r of H)r.USE&&M[r.TYPE](r)})();